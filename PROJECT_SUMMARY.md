# Video Pose Repetition Labeller - Project Summary

## ðŸŽ¯ What This Tool Does

This is a simple, focused GUI application (`video_pose_labeler.py`) for manually annotating exercise repetition segments in videos. It works with JSON keypoint files generated by the [RepJudge](https://github.com/fanlimua/RepJudge) project to add temporal labels for exercise phases.

## âœ… Key Features

### Core Functionality
- **Simple Video Navigation**: Play/pause, frame-by-frame stepping, and slider navigation
- **JSON Integration**: Reads pose keypoint data from RepJudge output files
- **Structured Labeling**: Generates state sequences from binary labels (e.g., "1010" â†’ prep, rep, no-rep, rep, no-rep, finish)
- **Batch Processing**: Load and process multiple exercise samples from organized directories
- **Persistent Storage**: Saves annotations back to the original JSON files

### User Interface
- **Two-Panel Layout**: Sample browser (left) + video viewer with controls (right)
- **Exercise/Sample Browser**: Navigate through organized directory structures
- **Annotation Progress**: Visual tracking of completed vs. remaining states
- **Simple Controls**: Mark state boundaries with single button clicks

### Exercise State Sequence
Based on binary repetition labels:
- **prep** - Preparation phase before exercise starts
- **rep** - Active repetition phase (when binary digit is '1')  
- **no-rep** - Inactive/transition phase (when binary digit is '0')
- **finish** - Completion phase after exercise ends

## ðŸ”§ Integration with RepJudge

This tool is designed as a **post-processing step** for RepJudge:

1. **RepJudge generates**: Pose keypoints and JSON files with skeleton data
2. **This tool adds**: Temporal annotations for exercise repetition phases  
3. **Result**: Enriched JSON files with both pose data and repetition labels

### Expected Directory Structure
```
project_root/
â”œâ”€â”€ json_keypoints/          # From RepJudge output
â”‚   â”œâ”€â”€ exercise_type_1/
â”‚   â”‚   â”œâ”€â”€ sample_001/
â”‚   â”‚   â”‚   â””â”€â”€ *.json
â”‚   â”‚   â””â”€â”€ sample_002/
â”‚   â””â”€â”€ exercise_type_2/
â””â”€â”€ videos/                  # Original video files
    â”œâ”€â”€ sample_001.mp4
    â””â”€â”€ sample_002.mp4
```
## ðŸ“Š Output Format

The tool reads and modifies JSON files with this structure:
```json
{
  "video_path": "path/to/video.mp4",
  "binary_label": "1010",
  "keypoints": [...],  // From RepJudge
  "annotations": [     // Added by this tool
    {"start": 0, "end": 50, "label": "prep"},
    {"start": 51, "end": 120, "label": "rep"},
    {"start": 121, "end": 180, "label": "no-rep"},
    {"start": 181, "end": 240, "label": "rep"},
    {"start": 241, "end": 300, "label": "no-rep"},
    {"start": 301, "end": 350, "label": "finish"}
  ]
}
```

## ï¿½ How to Use

1. **Run RepJudge first** to generate pose keypoints and JSON files
2. **Launch this tool**:
   ```bash
   python video_pose_labeler.py
   ```
3. **Select your json_keypoints folder** (generated by RepJudge)
4. **Choose exercise type and sample** from the browser
5. **Enter binary label** (e.g., "1010" for rep/no-rep pattern)
6. **Mark state boundaries** by positioning video and clicking "Mark end of current state"
7. **Save annotations** back to JSON files

## âœ… What Makes This Tool Special

- **Minimal Dependencies**: Only OpenCV and Pillow required
- **Simple but Effective**: Focused on the specific task of repetition labeling
- **RepJudge Integration**: Designed specifically for RepJudge workflow
- **Efficient Workflow**: Quick sample loading and annotation
- **Non-destructive**: Adds annotations without modifying existing keypoint data
- **Complete**: Handles prep, repetitions, and finish phases automatically

## ï¿½ Perfect For

- **Exercise Analysis Research**: Generate labeled datasets for repetition detection
- **Form Analysis**: Study transition phases between repetitions  
- **Dataset Creation**: Prepare ground truth data for machine learning
- **Manual Verification**: Review and correct automated repetition detection

This simple, focused tool complements RepJudge perfectly by adding the human annotation layer needed for high-quality exercise analysis datasets.